<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ä¸–ç•Œã®å‹•ç‰©åœ’ãƒ©ã‚¤ãƒ–åœ°å›³</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    #map { height: 500px; width: 100%; margin-top: 20px; }
    iframe { width: 560px; height: 315px; margin-top: 10px; display: block; }
  </style>
</head>
<body>
  <h1>ğŸŒ ä¸–ç•Œã®å‹•ç‰©åœ’ãƒ©ã‚¤ãƒ–åœ°å›³ ğŸŒ</h1>

  <label>ã‚«ãƒ†ã‚´ãƒªãƒ¼é¸æŠï¼š</label>
  <select id="category" onchange="filterMarkers()">
    <option value="">-- é¸æŠã—ã¦ãã ã•ã„ --</option>
    <option value="mammal">å“ºä¹³é¡</option>
    <option value="bird">é³¥é¡</option>
    <option value="reptile">çˆ¬è™«é¡</option>
  </select>

  <div id="map"></div>

  <iframe id="video" src="" frameborder="0" allowfullscreen></iframe>
  <p id="info"></p>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const animalData = [
      { name: "ãƒ‘ãƒ³ãƒ€", category: "mammal", lat: 35.7167, lng: 139.774, video: "https://www.youtube.com/embed/0V1V9YxG5KQ", info: "ãƒ‘ãƒ³ãƒ€ã¯1æ—¥ã®ç´„10ã€œ16æ™‚é–“ã‚’ç«¹ã‚’é£Ÿã¹ã¾ã™ã€‚" },
      { name: "ãƒ©ã‚¤ã‚ªãƒ³", category: "mammal", lat: 32.735, lng: -117.149, video: "https://www.youtube.com/embed/1La4QzGeaaQ", info: "ãƒ©ã‚¤ã‚ªãƒ³ã¯å¤œè¡Œæ€§ã§ã™ã€‚" },
      { name: "ãƒšãƒ³ã‚®ãƒ³", category: "bird", lat: 55.954, lng: -3.174, video: "https://www.youtube.com/embed/5qap5aO4i9A", info: "ãƒšãƒ³ã‚®ãƒ³ã¯æ°´ä¸­ã§é€Ÿãæ³³ã’ã¾ã™ã€‚" },
      { name: "ãƒ•ãƒ©ãƒŸãƒ³ã‚´", category: "bird", lat: 40.767, lng: -73.971, video: "https://www.youtube.com/embed/dQw4w9WgXcQ", info: "ãƒ•ãƒ©ãƒŸãƒ³ã‚´ã¯èµ¤è‰²ã®ä½“ã‚’æŒã¡ã¾ã™ã€‚" },
      { name: "ã‚«ãƒ¡", category: "reptile", lat: 25.7617, lng: -80.1918, video: "https://www.youtube.com/embed/dQw4w9WgXcQ", info: "ã‚«ãƒ¡ã¯é•·å¯¿ã§çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚" }
    ];

    // åœ°å›³ä½œæˆ
    const map = L.map('map').setView([20, 0], 2);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    let markers = [];

    function addMarkers(data) {
      markers.forEach(m => map.removeLayer(m));
      markers = [];

      data.forEach(animal => {
        const marker = L.marker([animal.lat, animal.lng]).addTo(map);
        marker.bindPopup(animal.name);
        marker.on('click', () => {
          document.getElementById("video").src = animal.video;
          document.getElementById("info").textContent = animal.info;
        });
        markers.push(marker);
      });
    }

    function filterMarkers() {
      const category = document.getElementById("category").value;
      if (category === "") {
        addMarkers(animalData);
      } else {
        const filtered = animalData.filter(a => a.category === category);
        addMarkers(filtered);
      }
    }

    // åˆæœŸè¡¨ç¤º
    addMarkers(animalData);
  </script>
</body>
</html>
